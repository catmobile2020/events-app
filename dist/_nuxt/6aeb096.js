(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{481:function(t,e,n){var content=n(495);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(28).default)("86fedc30",content,!0,{sourceMap:!1})},483:function(t,e,n){t.exports=n.p+"img/icon.5b36f19.png"},484:function(t,e,n){"use strict";n.r(e);var o=n(482),r=(n(48),n(56),n(66),n(24),n(21),n(57),n(614)),c=n(615),l=n(616),d=n(617),v=n(479),f=n(489),m=n(496),h={components:{LMap:r.a,LTileLayer:c.a,LMarker:l.a,LTooltip:d.a,LGeosearch:m.a},props:{defaultLocation:{type:Object,default:function(){return{lat:24.222142,lng:45.0741}},position:Object},userLocations:{type:Object,position:Object},mapIndex:{type:Number}},data:function(){return{map:!1,loading:!1,userLocation:{lat:24.222142,lng:45.0741},geoSearchOptions:{provider:new f.a,showMarker:!1,autoClose:!0},icon:Object(v.icon)({iconRetinaUrl:n(483),iconUrl:n(492),shadowUrl:n(493)}),position:{},addressMap:"",tileProvider:{attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},zoom:3,dragging:!1}},mounted:function(){var t=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){t.userLocation={lat:e.coords.latitude,lng:e.coords.longitude}})),this.$refs.map.mapObject.on("geosearch/showlocation",this.onSearch),this.$nextTick((function(){setTimeout((function(){t.map=!0,t.$refs.map.mapObject.invalidateSize(),t.$refs.map.mapObject.on("geosearch/showlocation",t.onSearch)}),200)}))},methods:{modalShown:function(){var t=this;setTimeout((function(){t.$refs.mymap.mapObject.invalidateSize()}),100)},onMapClick:function(t){this.position=t.latlng,this.$emit("onMapValue",t,this.mapIndex),this.userLocation="",this.userLocations={}},onSearch:function(t){var e=t.location;this.position={lat:e.y,lng:e.x}}},computed:{tooltipContent:function(){return this.dragging?"...":this.loading?"Loading...":"<strong>".concat(this.addressMap.replace(",","<br/>"),"</strong> <hr/><strong>lat:</strong> ").concat(this.position.lat,"<br/> <strong>lng:</strong> ").concat(this.position.lng)},tooltipCurrentPosition:function(){return this.dragging?"...":this.loading?"Loading...":"<strong>lat:</strong> ".concat(this.userLocation.lat,"<br/> <strong>lng:</strong> ").concat(this.userLocation.lng)}}},x=(n(494),n(68)),component=Object(x.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center map-container"},[e(o.a,{attrs:{cols:"12"}},[e("div",{staticClass:"ConOfLmap"},[e("l-map",{ref:"map",staticClass:"map",staticStyle:{height:"300px",width:"100%"},attrs:{zoom:t.zoom,center:[t.position.lat||t.userLocation.lat||t.defaultLocation.lat,t.position.lng||t.userLocation.lng||t.defaultLocation.lng]},on:{click:t.onMapClick}},[e("l-tile-layer",{attrs:{url:t.tileProvider.url,attribution:t.tileProvider.attribution}}),t._v(" "),t.userLocation.lat&&t.userLocation.lng?e("l-marker",{staticClass:"user-location",attrs:{icon:t.icon,"lat-lng":t.userLocation},on:{"update:latLng":function(e){t.userLocation=e},"update:lat-lng":function(e){t.userLocation=e}}}):t.position.lat&&t.position.lng?e("l-marker",{attrs:{visible:"",draggable:"",icon:t.icon,"lat-lng":t.position},on:{"update:latLng":function(e){t.position=e},"update:lat-lng":function(e){t.position=e},dragstart:function(e){t.dragging=!0},dragend:function(e){t.dragging=!1}}}):t._e()],1)],1)])],1)}),[],!1,null,null,null);e.default=component.exports},494:function(t,e,n){"use strict";n(481)},495:function(t,e,n){var o=n(27)((function(i){return i[1]}));o.push([t.i,".map{height:300px;position:relative;width:500px}",""]),o.locals={},t.exports=o},502:function(t,e,n){t.exports=n.p+"img/event-icon.768a7b5.png"},505:function(t,e,n){"use strict";n.r(e);var o,r=n(466),c=n(514),l=n(480),d=n(482),v=n(478),f=n(620),m=n(633),h=n(211),x=n(467),C=n(635),_=n(613),w=n(475),k=n(519),y=n(476),D=n(608),L=(n(25),n(2)),j=n(15),O=(n(69),n(5),n(12),n(89),n(614)),M=n(615),E=n(616),$=n(617),S=n(479),P=n(489),T=n(496),R=(n(484),o={components:{LMap:O.a,LTileLayer:M.a,LMarker:E.a,LTooltip:$.a,LGeosearch:T.a},props:{defaultLocation:{type:Object,default:function(){return{lat:8.9806,lng:38.7578}}}},data:function(){return{eventData:{name:"",type:"",start:"",latitude:"",longitude:""},selectedEvent:null,date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),menu2:!1,errorSnackbar:!1,timeout:3e3,errorMessage:"",showDialog:!1,confirmDialoge:!1,isEditing:!1,map:!1,loading:!1,userLocation:{},geoSearchOptions:{provider:new P.a,showMarker:!1,autoClose:!0},icon:Object(S.icon)({iconRetinaUrl:n(483),iconUrl:n(492),shadowUrl:n(493)}),position:{},addressMap:"",tileProvider:{attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},zoom:18,address:[{lat:null,lon:null}],events:[],eventId:"",eventIdToDelete:null}},computed:{},methods:{eventAddNew:function(){var t=this;return Object(j.a)(regeneratorRuntime.mark((function e(){var data,n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$post("/admin/events",t.eventData);case 3:data=e.sent,t.events=data.data,t.showDialog=!1,t.$router.push("/content/schedule"),e.next=12;break;case 9:if(e.prev=9,e.t0=e.catch(0),e.t0&&e.t0.data){for(r in n=e.t0.data.error,console.error("errorData",t.errorData),o=[],n)Array.isArray(n[r])&&n[r].forEach((function(t){o.push(t)}));t.errorSnackbar=!0,t.errorMessage=o.join("\n"),console.error("this.errorMessage",t.errorMessage)}else console.error("error.message",e.t0.data.error),t.errorMessage="Registration failed. Please try again later.";case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},eventEdited:function(){var t=this;return Object(j.a)(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.$put("/admin/events/".concat(t.selectedEvent.id),t.eventData);case 3:e.sent,t.showDialog=!1,t.getEventsData(),e.next=11;break;case 8:if(e.prev=8,e.t0=e.catch(0),e.t0&&e.t0.data){for(r in n=e.t0.data.error,o=[],n)Array.isArray(n[r])&&n[r].forEach((function(t){o.push(t)}));t.errorSnackbar=!0,t.errorMessage=o.join("\n")}else console.error("error.message",e.t0.data.error);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},editEvent:function(t){this.selectedEvent=t,this.isEditing=!0,console.log("item",t),this.eventData={name:t.name,type:t.type,start:t.start},this.showDialog=!0},saveItem:function(){this.isEditing?this.eventEdited():this.eventAddNew()},closeProjectModal:function(){var t=this;this.editedIndex=-1,this.dialogProject=!1,this.$nextTick((function(){t.$v.$reset(),t.formItem=Object.assign({},t.defaultItem)}))},deleteEvent:function(){var t=this;return Object(j.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.selectedEvent){e.next=6;break}return e.next=4,t.$axios.$delete("/admin/events/".concat(t.selectedEvent.id));case 4:t.confirmDialoge=!1,t.getEventsData();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Deletion failed:",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},getEventsData:function(){var t=this;return Object(j.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("/admin/events");case 2:data=e.sent,t.events=data.data,console.log("this.questions",t.events);case 5:case"end":return e.stop()}}),e)})))()},redirectToOverview:function(t){this.$router.push("/dashboard/".concat(t))},chooseMap:function(t,i){this.address[i]||(this.address[i]={}),this.address[i].lat=t.latlng.lat,this.address[i].lon=t.latlng.lng,this.eventData.latitude=t.latlng.lat,this.eventData.longitude=t.latlng.lng}},mounted:function(){var t=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){t.userLocation={lat:e.coords.latitude,lng:e.coords.longitude}}))},created:function(){this.getEventsData()}},Object(L.a)(o,"computed",{dialogTitle:function(){return this.isEditing?"Edit Event":"Create New Event"}}),Object(L.a)(o,"watch",{dialogProject:function(t){t||this.closeProjectModal()}}),Object(L.a)(o,"head",(function(){return{title:"events",rel:"stylesheet",href:"https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"}})),o),I=n(68),component=Object(I.a)(R,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"brief-components"},[e(v.a,[e(d.a,{staticClass:"d-flex justify-center",attrs:{cols:"12",md:"12"}},[e(d.a,{attrs:{lg:"3",md:"4",sm:"6",cols:"12"}},[e(c.a,{staticClass:"mx-auto fill-height",attrs:{"max-width":"100%",elevation:"0"},on:{click:function(e){t.showDialog=!0}}},[e("div",{staticClass:"fill-height py-7 d-flex justify-center conCard"},[e("div",{staticClass:"d-flex align-center justify-center flex-column"},[e(h.a,{staticClass:"event-icon"},[t._v("mdi-plus")]),t._v(" "),e("div",{staticClass:"conTxt"},[t._v("Create Event")])],1)])])],1)],1),t._v(" "),e(w.a,{staticClass:"d-md-flex justify-center",attrs:{cols:"12",md:"12"}},t._l(t.events,(function(o,i){return e(d.a,{key:i,attrs:{lg:"3",md:"2",sm:"6",cols:"12"}},[e(c.a,{staticClass:"mx-auto",attrs:{"max-width":"100%",elevation:"0"}},[e("div",{staticClass:"py-2 event-card"},[e("div",{staticClass:"d-flex align-items-center justify-space-between"},[e("div",{staticClass:"d-flex align-items-center"},[e("img",{staticClass:"event-icon",attrs:{src:n(502),alt:"magic-link"}}),t._v(" "),e("div",{staticClass:"conTxt",on:{click:function(e){return t.redirectToOverview(o.id)}}},[t._v("\n                  "+t._s(o.name)+"\n                ")])]),t._v(" "),e("div",[e(h.a,{staticClass:"px-2",attrs:{color:"#42bba2"},on:{click:function(e){return t.editEvent(o)}}},[t._v("mdi-pencil")]),t._v(" "),e(h.a,{staticClass:"px-2",attrs:{color:"red"},on:{click:function(e){t.selectedEvent=o,t.confirmDialoge=!0}}},[t._v("mdi-delete")])],1)]),t._v(" "),e("div",{staticClass:"created"},[t._v(t._s(o.start))])])])],1)})),1)],1),t._v(" "),e(m.a,{attrs:{"max-width":"500px"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[e(c.a,{staticClass:"conConfirmPopup"},[e(l.c,[e("span",{staticClass:"text-h5 modalTitle"},[t._v(t._s(t.dialogTitle))])]),t._v(" "),e(l.b,{staticClass:"textConfirm"},[e(v.a,[e(w.a,{staticClass:"conFormSubmit d-flex justify-center"},[e(d.a,{attrs:{cols:"12"}},[e("div",{staticClass:"pt-3"},[e(D.a,{attrs:{label:"Event Name",outlined:""},model:{value:t.eventData.name,callback:function(e){t.$set(t.eventData,"name",e)},expression:"eventData.name"}})],1)]),t._v(" "),e(d.a,{attrs:{cols:"12"}},[e(_.a,{attrs:{row:""},model:{value:t.eventData.type,callback:function(e){t.$set(t.eventData,"type",e)},expression:"eventData.type"}},[e(C.a,{attrs:{label:"hybrid",value:"hybrid"}}),t._v(" "),e(C.a,{attrs:{label:"virtual",value:"virtual"}})],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12"}},[e(x.a,{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[e(D.a,t._g(t._b({attrs:{label:"Start of your event","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.eventData.start,callback:function(e){t.$set(t.eventData,"start",e)},expression:"eventData.start"}},"v-text-field",r,!1),o))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t._v(" "),e(f.a,{on:{input:function(e){t.menu2=!1}},model:{value:t.eventData.start,callback:function(e){t.$set(t.eventData,"start",e)},expression:"eventData.start"}})],1)],1),t._v(" "),e(d.a,{attrs:{cols:"12"}},[e("Map",{on:{onMapValue:t.chooseMap}})],1)],1)],1)],1),t._v(" "),e(l.a,{staticClass:"pb-7"},[e(y.a),t._v(" "),e(r.a,{staticClass:"btnCancel",attrs:{tile:""},on:{click:function(e){e.stopPropagation(),t.showDialog=!1}}},[t._v("Cancel")]),t._v(" "),e(r.a,{staticClass:"btnPrimaryOrg",attrs:{tile:""},on:{click:function(e){return t.saveItem()}}},[t._v("Confirm")]),t._v(" "),e(y.a)],1)],1)],1),t._v(" "),e(m.a,{attrs:{"max-width":"500px"},model:{value:t.confirmDialoge,callback:function(e){t.confirmDialoge=e},expression:"confirmDialoge"}},[e(c.a,{staticClass:"conConfirmPopup"},[e(l.c,[e("span",{staticClass:"text-h5 modalTitle"},[t._v("Are you sure")])]),t._v(" "),e(l.b,{staticClass:"textConfirm"},[t._v("Are you sure you want to delete this event ?\n      ")]),t._v(" "),e(l.a,{staticClass:"pb-7"},[e(y.a),t._v(" "),e(r.a,{staticClass:"btnCancel",attrs:{tile:""},on:{click:function(e){e.stopPropagation(),t.confirmDialoge=!1}}},[t._v("Cancel")]),t._v(" "),e(r.a,{staticClass:"btnPrimaryOrg",attrs:{tile:""},on:{click:function(e){return t.deleteEvent()}}},[t._v("Confirm")]),t._v(" "),e(y.a)],1)],1)],1),t._v(" "),e(k.a,{attrs:{color:"red",shaped:"",top:"",right:"",timeout:t.timeout},model:{value:t.errorSnackbar,callback:function(e){t.errorSnackbar=e},expression:"errorSnackbar"}},[t._v("\n    "+t._s(t.errorMessage)+"\n  ")])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Map:n(484).default})}}]);